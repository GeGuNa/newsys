#!/bin/sh

set -e

exec > exports.c

cat << EOT

/* autogenerated by ./mkexports; do not edit */

#define	NULL	((void *)0)

EOT

cat ../arch-$ARCH/libc_syms ../libc_syms "$@" | while read sym
do
	echo "extern void $sym;"
done

cat << EOT

const struct
{
	char *name;
	void *addr;
} exports[] =
{
EOT

cat ../arch-$ARCH/libc_syms ../libc_syms | while read sym
do
	echo "	{ \"$sym\", &$sym },"
done

cat << EOT
	{ NULL, NULL }
};
EOT
